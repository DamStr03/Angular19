<theory-header chapterName="Storage" />
<section class="card-body">
	<article class="card">
		<div class="card-header">
			<h2>Types de stockages</h2>
		</div>
		<div class="card-body">
			<p>Lorsque l'on veut stocker des donn√©s qui persistent, on peut utiliser le localStorage ou le sessionStorage ou le cookie.</p>
			<h3>LocalStorage</h3>
			<p>
				Le localStorage est un stockage persistant, c'est-√†-dire que les donn√©es restent disponibles m√™me apr√®s la fermeture du
				navigateur. Il est accessible via l'objet <code>localStorage</code> et permet de stocker des paires cl√©-valeur.
			</p>
			<h3>SessionStorage</h3>
			<p>
				Le sessionStorage est un stockage temporaire, c'est-√†-dire que les donn√©es sont supprim√©es lorsque l'onglet ou la fen√™tre du
				navigateur est ferm√©e. Il est accessible via l'objet <code>sessionStorage</code> et permet √©galement de stocker des paires
				cl√©-valeur. <br />
				<i>√âtant donner que le SessionStorage se vide lorsque l'onglet est ferm√© il n'est pas utilis√© en Angular.</i>
			</p>
			<h3>Cookie</h3>
			<p>
				Un cookie est un petit fichier texte qui est stock√© sur l'ordinateur de l'utilisateur. Il est envoy√© au serveur √† chaque
				requ√™te HTTP. Les cookies sont souvent utilis√©s pour stocker des informations de session ou des pr√©f√©rences utilisateur.
				<br />
				<i>Note si on souhaite utiliser les cookies, il faut un package suppl√©mentaire: <code>ngx-cookie-service</code></i>
			</p>
		</div>
	</article>

	<article class="card">
		<div class="card-header">
			<h2>Sauvegarder des donn√©es</h2>
		</div>
		<div class="card-body">
			<p>
				Pour sauvegarder des donn√©es dans le localStorage ou le sessionStorage, on utilise la m√©thode
				<code>setItem(key, value)</code>. La cl√© est une cha√Æne de caract√®res qui identifie la donn√©e, et la valeur est la donn√©e √†
				stocker. <br />
				<i>Note: il faut convertir les objets en JSON avant de les stocker √† l'aide de <code>JSON.stringify</code>.</i>
			</p>
		</div>
	</article>

	<article class="card">
		<div class="card-header">
			<h2>R√©cup√©rer les donn√©es</h2>
		</div>
		<div class="card-body">
			<p>
				Pour r√©cup√©rer des donn√©es dans le localStorage ou le sessionStorage, on utilise la m√©thode
				<code>getItem(key)</code>. La cl√© est la m√™me que celle utilis√©e lors de la sauvegarde. <br />
				<i>Note: il faut convertir les donn√©es JSON en objet √† l'aide de <code>JSON.parse</code>.</i>
			</p>
		</div>
	</article>

	<article class="card">
		<div class="card-header">
			<h2>Exemple de code</h2>
		</div>
		<div class="card-body">
			<p>Voici un exemple de code pour stocker et r√©cup√©rer des donn√©es dans le localStorage :</p>
			<textarea highlight-js [options]="{}" [lang]="'typescript'">
import {Component, OnInit} from "@angular/core";
import {DemoHeaderComponent} from "@app/features/demo/components/layout/demo-header/demo-header.component";
import {FormsModule} from "@angular/forms";

@Component({
  selector: "demo-storage",
  imports: [DemoHeaderComponent, FormsModule],
  templateUrl: "./demo-storage.component.html",
  styleUrl: "./demo-storage.component.scss",
})
export class DemoStorageComponent implements OnInit {
  usernameLS: string = ""; // 1. pr√©paration de la variable qui va stocker la valeur du localStorage

  ngOnInit(): void {
    this.usernameLS = localStorage.getItem("username") || ""; // 2. r√©cup√©ration de la valeur du localStorage (+ parse si n√©cessaire)
  }

  saveLocalStorageUsername() {
    localStorage.setItem("username", this.username); // 3. sauvegarde de la valeur dans le localStorage
  }
}
				</textarea
			>
			<p>üîéAnalyse:</p>
			<ul>
				<li>
					<code>ngOnInit</code> est une m√©thode du cycle de vie d'un composant Angular qui est appel√©e apr√®s que le composant a
					√©t√© initialis√©. C'est ici que l'on peut r√©cup√©rer les donn√©es du localStorage.
				</li>
				<li>
					<code>localStorage.getItem("username")</code> permet de r√©cup√©rer la valeur associ√©e √† la cl√© <code>username</code>. Si
					la valeur n'existe pas, on retourne une cha√Æne vide.
				</li>
				<li>
					<code>localStorage.setItem("username", this.username)</code> permet de sauvegarder la valeur de la variable
					<code>username</code> dans le localStorage sous la cl√© <code>username</code>.
				</li>
			</ul>
		</div>
	</article>
</section>
